{"ast":null,"code":"var _a, _b, _c;\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component, ChangeDetectorRef, ViewChild, Input } from '@angular/core';\nimport { ModalDirective } from 'ngx-bootstrap/modal';\nimport { APIService } from '../../components/services/api.service';\nimport { Common } from '../../services/common/common';\nimport { ProviderCptPlanNotes } from '../models/ProviderCptPlanNotes.model';\nimport { FormBuilder, Validators } from '@angular/forms';\nlet ProviderCptPlanNotesComponent = class ProviderCptPlanNotesComponent {\n  constructor(_apiService, _chRef, formBuilder) {\n    this._apiService = _apiService;\n    this._chRef = _chRef;\n    this.formBuilder = formBuilder;\n    this.listProviderPlanNotes = [];\n    this.note = new ProviderCptPlanNotes();\n  }\n  ngOnInit() {\n    this.InitForm();\n  }\n  InitForm() {\n    this.noteForm = this.formBuilder.group({\n      noteContent: ['', [Validators.required, Validators.maxLength(150), Validators.minLength(10)]]\n    });\n  }\n  get formControls() {\n    return this.noteForm.controls;\n  }\n  GetNotes() {\n    if (!Common.isNullOrEmpty(this.ProviderCPTPlanId)) {\n      this._apiService.getData(`/Setup/GetProviderCPTPlanNotes?PlanId=${this.ProviderCPTPlanId}`).subscribe(res => {\n        if (res.Status == \"Success\") {\n          if (this.dtProviderPlanNotes) {\n            this.dtProviderPlanNotes.destroy();\n          }\n          this.listProviderPlanNotes = res.Response;\n          this._chRef.detectChanges();\n          const table = $('.dtProviderPlanNotes');\n          this.dtProviderPlanNotes = table.DataTable({\n            lengthMenu: [[5, 10, 15, 20], [5, 10, 15, 20]],\n            language: {\n              emptyTable: \"No data available\"\n            }\n          });\n        } else {\n          swal(\"Provider CPT Fee Plan\", res.Status, \"info\");\n        }\n      });\n    }\n  }\n  SaveNote() {\n    if (this.noteForm.valid) {\n      this.note.Provider_Cpt_Plan_Id = this.ProviderCPTPlanId;\n      this._apiService.PostData(`/Setup/SaveProviderCPTNote`, this.note, res => {\n        if (res.Status === 'Success') {\n          swal('Provider CPT Plan Notes', 'Note has been created/updated successfully.', 'success');\n          this.GetNotes();\n        } else {\n          swal('Provider CPT Plan Notes', res.Status, 'error');\n        }\n      });\n    }\n  }\n  GetRemainingCharacters() {\n    if (this.note && this.note.NOTE_CONTENT && this.note.NOTE_CONTENT.length > 0) {\n      return 150 - this.note.NOTE_CONTENT.length;\n    }\n    return 150;\n  }\n  onParentModalShown(e) {\n    this.GetNotes();\n  }\n  onParentModalHidden(e) {}\n  onChildModalShown(e) {}\n  onEditNote(Note) {\n    if (Note) {\n      this.note = Note;\n    } else {\n      this.note = new ProviderCptPlanNotes();\n    }\n    this.GetRemainingCharacters();\n  }\n  onDeleteNote(Note) {\n    if (Note) {\n      this._apiService.confirmFun('Delete Confirm', 'Are you sure that you want to delete selected note?', () => {\n        this._apiService.getData(`/Setup/DeleteProviderCPTNote?NoteId=${Note.Note_Id}`).subscribe(res => {\n          if (res.Status === 'Success') {\n            swal('Provider CPT Plan Notes', 'Note has been deleted successfully.', 'success');\n            this.GetNotes();\n          } else {\n            swal('Provider CPT Plan Notes', res.Status, 'error');\n          }\n        });\n      });\n    }\n  }\n  onChildModalHidden(e) {\n    this.note = new ProviderCptPlanNotes();\n    this.noteForm.reset();\n  }\n};\n__decorate([ViewChild(ModalDirective), __metadata(\"design:type\", typeof (_b = typeof ModalDirective !== \"undefined\" && ModalDirective) === \"function\" ? _b : Object)], ProviderCptPlanNotesComponent.prototype, \"parentModal\", void 0);\n__decorate([ViewChild(ModalDirective), __metadata(\"design:type\", typeof (_c = typeof ModalDirective !== \"undefined\" && ModalDirective) === \"function\" ? _c : Object)], ProviderCptPlanNotesComponent.prototype, \"childModal\", void 0);\n__decorate([Input('ProviderCPTPlanId'), __metadata(\"design:type\", String)], ProviderCptPlanNotesComponent.prototype, \"ProviderCPTPlanId\", void 0);\nProviderCptPlanNotesComponent = __decorate([Component({\n  selector: 'app-provider-cpt-plan-notes',\n  templateUrl: './provider-cpt-plan-notes.component.html',\n  styleUrls: ['./provider-cpt-plan-notes.component.css']\n}), __metadata(\"design:paramtypes\", [APIService, ChangeDetectorRef, typeof (_a = typeof FormBuilder !== \"undefined\" && FormBuilder) === \"function\" ? _a : Object])], ProviderCptPlanNotesComponent);\nexport { ProviderCptPlanNotesComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}